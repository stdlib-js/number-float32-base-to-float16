{"version":3,"file":"index.mjs","sources":["../lib/main.js","../lib/polyfill.js","../lib/index.js"],"sourcesContent":["/**\n* @license Apache-2.0\n*\n* Copyright (c) 2025 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MAIN //\n\nvar f16round = ( typeof Math.f16round === 'function' ) ? Math.f16round : null; // eslint-disable-line stdlib/no-builtin-math\n\n\n// EXPORTS //\n\nexport default f16round;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2025 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\n\nimport isnanf from '@stdlib/math-base-assert-is-nanf';\nimport f32 from '@stdlib/number-float64-base-to-float32';\nimport isFiniteNumber from '@stdlib/math-base-assert-is-finitef';\nimport FLOAT16_EPSILON from '@stdlib/constants-float16-eps';\nimport FLOAT16_MAX from '@stdlib/constants-float16-max';\nimport FLOAT16_MIN from '@stdlib/constants-float16-smallest-normal';\nimport EPS from '@stdlib/constants-float32-eps';\nimport PINF from '@stdlib/constants-float32-pinf';\nimport absf from '@stdlib/math-base-special-absf';\n\n\n// VARIABLES //\n\nvar INVERSE_EPSILON = f32( 1.0 / EPS );\n\n\n// FUNCTIONS //\n\n/**\n* Performs banker's rounding (round-half-to-even) via floating-point arithmetic.\n*\n* @private\n* @param {number} n - input value\n* @returns {number} rounded value\n*/\nfunction roundTiesToEven( n ) {\n\treturn f32( f32( n + INVERSE_EPSILON ) - INVERSE_EPSILON );\n}\n\n\n// MAIN //\n\n/**\n* Converts a single-precision floating-point number to the nearest half-precision floating-point number.\n*\n* @param {number} x - single-precision floating-point number\n* @returns {number} nearest half-precision floating-point number\n*\n* @example\n* import float64ToFloat32 from '@stdlib/number-float64-base-to-float32';\n*\n* var y = float32ToFloat16( float64ToFloat32( 1.337 ) );\n* // returns 1.3369140625\n*/\nfunction float32ToFloat16( x ) {\n\tvar res;\n\tvar mod;\n\tvar a;\n\tvar s;\n\n\tx = f32( x );\n\tif ( x === 0.0 || isnanf( x ) || !isFiniteNumber( x ) ) {\n\t\treturn x;\n\t}\n\tif ( x < 0.0 ) {\n\t\ts = f32( -1.0 );\n\t} else {\n\t\ts = f32( 1.0 );\n\t}\n\tmod = absf( x );\n\tif ( mod < FLOAT16_MIN ) {\n\t\treturn f32( f32( f32( s * roundTiesToEven( f32( f32( mod / FLOAT16_MIN ) / FLOAT16_EPSILON ) ) ) * FLOAT16_MIN ) * FLOAT16_EPSILON ); // eslint-disable-line max-len\n\t}\n\t// Leverage Veltkamp's algorithm for splitting a number into two numbers to generate an approximation to `x` which fits in a smaller number of bits:\n\ta = f32( f32( 1.0 + f32( FLOAT16_EPSILON / EPS ) ) * mod );\n\tres = f32( a - f32( a - mod ) );\n\n\tif ( res > FLOAT16_MAX || isnanf( res ) ) {\n\t\treturn f32( s * PINF );\n\t}\n\treturn f32( s * res );\n}\n\n\n// EXPORTS //\n\nexport default float32ToFloat16;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2025 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n/**\n* Convert a single-precision floating-point number to the nearest half-precision floating-point number.\n*\n* @module @stdlib/number-float32-base-to-float16\n*\n* @example\n* import float64ToFloat32 from '@stdlib/number-float64-base-to-float32';\n* import float32ToFloat16 from '@stdlib/number-float32-base-to-float16';\n*\n* var y = float32ToFloat16( float64ToFloat32( 1.337 ) );\n* // returns 1.3369140625\n*/\n\n// MODULES //\n\nimport builtin from './main.js';\nimport polyfill from './polyfill.js';\n\n\n// MAIN //\n\nvar main;\nif ( typeof builtin === 'function' ) {\n\tmain = builtin;\n} else {\n\tmain = polyfill;\n}\n\n\n// EXPORTS //\n\nexport default main;\n"],"names":["f16round","Math","INVERSE_EPSILON","f32","EPS","main$1","builtin","x","res","mod","a","s","n","isnanf","isFiniteNumber","absf","FLOAT16_MIN","FLOAT16_EPSILON","FLOAT16_MAX","PINF"],"mappings":";;g4BAsBA,IAAIA,EAAsC,mBAAlBC,KAAKD,SAA4BC,KAAKD,SAAW,KCarEE,EAAkBC,EAAK,EAAMC,GCgBjC,IAAAC,EATwB,mBAAZC,EACJA,EDuBR,SAA2BC,GAC1B,IAAIC,EACAC,EACAC,EACAC,EAvBqBC,EA0BzB,OAAW,KADXL,EAAIJ,EAAKI,KACSM,EAAQN,KAAQO,EAAgBP,GAC1CA,GAGPI,EAAIR,EADAI,EAAI,GACE,EAED,IAEVE,EAAMM,EAAMR,IACDS,EACHb,EAAKA,EAAKA,EAAKQ,GApCEC,EAoCmBT,EAAKA,EAAKM,EAAMO,GAAgBC,GAnCrEd,EAAKA,EAAKS,EAAIV,GAAoBA,KAmC2Dc,GAAgBC,IAGpHP,EAAIP,EAAKA,EAAK,EAAMA,EAAKc,EAAkBb,IAAUK,IACrDD,EAAML,EAAKO,EAAIP,EAAKO,EAAID,KAEbS,GAAeL,EAAQL,GAC1BL,EAAKQ,EAAIQ,GAEVhB,EAAKQ,EAAIH,IACjB"}